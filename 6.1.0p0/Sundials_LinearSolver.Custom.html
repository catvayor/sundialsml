<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="docstyle.css" type="text/css">
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script><script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Sundials_LinearSolver.Iterative.html">
<link rel="Up" href="Sundials_LinearSolver.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of extensions" rel=Appendix href="index_extensions.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Sundials_Index" rel="Chapter" href="Sundials_Index.html">
<link title="Sundials_Config" rel="Chapter" href="Sundials_Config.html">
<link title="Sundials_RealArray" rel="Chapter" href="Sundials_RealArray.html">
<link title="Sundials_RealArray2" rel="Chapter" href="Sundials_RealArray2.html">
<link title="Sundials_LintArray" rel="Chapter" href="Sundials_LintArray.html">
<link title="Sundials_ROArray" rel="Chapter" href="Sundials_ROArray.html">
<link title="Sundials" rel="Chapter" href="Sundials.html">
<link title="Nvector" rel="Chapter" href="Nvector.html">
<link title="Nvector_serial" rel="Chapter" href="Nvector_serial.html">
<link title="Nvector_many" rel="Chapter" href="Nvector_many.html">
<link title="Sundials_Matrix" rel="Chapter" href="Sundials_Matrix.html">
<link title="Sundials_LinearSolver" rel="Chapter" href="Sundials_LinearSolver.html">
<link title="Sundials_NonlinearSolver" rel="Chapter" href="Sundials_NonlinearSolver.html">
<link title="Nvector_custom" rel="Chapter" href="Nvector_custom.html">
<link title="Nvector_array" rel="Chapter" href="Nvector_array.html">
<link title="Cvode" rel="Chapter" href="Cvode.html">
<link title="Kinsol" rel="Chapter" href="Kinsol.html">
<link title="Ida" rel="Chapter" href="Ida.html">
<link title="Arkode" rel="Chapter" href="Arkode.html">
<link title="Cvodes" rel="Chapter" href="Cvodes.html">
<link title="Idas" rel="Chapter" href="Idas.html">
<link title="Sundials_parallel" rel="Chapter" href="Sundials_parallel.html">
<link title="Nvector_parallel" rel="Chapter" href="Nvector_parallel.html">
<link title="Nvector_mpimany" rel="Chapter" href="Nvector_mpimany.html">
<link title="Nvector_mpiplusx" rel="Chapter" href="Nvector_mpiplusx.html">
<link title="Kinsol_bbd" rel="Chapter" href="Kinsol_bbd.html">
<link title="Arkode_bbd" rel="Chapter" href="Arkode_bbd.html">
<link title="Cvode_bbd" rel="Chapter" href="Cvode_bbd.html">
<link title="Cvodes_bbd" rel="Chapter" href="Cvodes_bbd.html">
<link title="Ida_bbd" rel="Chapter" href="Ida_bbd.html">
<link title="Idas_bbd" rel="Chapter" href="Idas_bbd.html">
<link title="Nvector_openmp" rel="Chapter" href="Nvector_openmp.html">
<link title="Nvector_pthreads" rel="Chapter" href="Nvector_pthreads.html"><link title="Wrapper for making custom Direct linear solvers." rel="Section" href="#dlscustom">
<title>Sundials/ML 6.1.0p0 : Sundials_LinearSolver.Custom</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Sundials_LinearSolver.Iterative.html" title="Sundials_LinearSolver.Iterative">Previous</a>
&nbsp;<a class="up" href="Sundials_LinearSolver.html" title="Sundials_LinearSolver">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Sundials_LinearSolver.Custom.html">Sundials_LinearSolver.Custom</a></h1>

<pre><span id="MODULECustom"><span class="keyword">module</span> Custom</span>: <code class="code"><span class="keyword">sig</span></code> <a href="Sundials_LinearSolver.Custom.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
<div class="info-desc">
<p>Custom linear solvers.</p>
</div>
</div>
<hr width="100%">

<pre><span id="TYPEatimesfn"><span class="keyword">type</span> <code class="type">('data, 'kind)</code> atimesfn</span> = <code class="type">('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> unit</code> </pre>
<div class="info ">
<div class="info-desc">
<p>A function <code class="code">atimesfn&nbsp;v&nbsp;z</code> computes the action of the system
      matrix on the vector <code class="code">v</code>, storing the result in <code class="code">z</code>. The matrix is
      represented implicitly by the effect of the function.</p>

<p>If a problem occurs the function raises <a href="Sundials_LinearSolver.html#EXCEPTIONATimesFailure"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">ATimesFailure</span></code></a>.</p>
</div>
</div>


<pre><span id="TYPEpsetupfn"><span class="keyword">type</span> <code class="type"></code>psetupfn</span> = <code class="type">unit -> unit</code> </pre>
<div class="info ">
<div class="info-desc">
<p>Functions that set up any problem data in preparation for calls to
      <code class="code">psolvefn</code>.</p>

<p>If a problem occurs the function raises <a href="Sundials_LinearSolver.html#EXCEPTIONPSetFailure"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">PSetFailure</span></code></a>.</p>
</div>
</div>


<pre><span id="TYPEpsolvefn"><span class="keyword">type</span> <code class="type">('data, 'kind)</code> psolvefn</span> = <code class="type">('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a> -> float -> bool -> unit</code> </pre>
<div class="info ">
<div class="info-desc">
<p>A function <code class="code">psolvefn&nbsp;r&nbsp;z&nbsp;tol&nbsp;lr</code> that solves the preconditioner
      equation $Pz = r$  for the vector <code class="code">z</code> such that
      $\left\lVert Pz - r \right\rVert_\mathrm{wrms} < \mathit{tol}$ .
      If <code class="code">lr</code> is <code class="code"><span class="keyword">true</span></code> then $P$  should be treated as a left
      preconditioner and otherwise as a right preconditioner.</p>

<p>If a problem occurs the function raises <a href="Sundials_LinearSolver.html#EXCEPTIONPSolveFailure"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">PSolveFailure</span></code></a>.</p>
</div>
</div>


<pre><code><span id="TYPEops"><span class="keyword">type</span> <code class="type">('matrix, 'data, 'kind, 'lsolver)</code> ops</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.solver_type">solver_type</span>&nbsp;: <code class="type"><a href="Sundials_LinearSolver.html#TYPElinear_solver_type">Sundials_LinearSolver.linear_solver_type</a></code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Broadly classifies the operations provided by a linear solver and
          its operating principle.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.solver_id">solver_id</span>&nbsp;: <code class="type"><a href="Sundials_LinearSolver.html#TYPElinear_solver_id">Sundials_LinearSolver.linear_solver_id</a></code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Identifies the linear solver. This value should normally be set
          to <a href="Sundials_LinearSolver.html#TYPElinear_solver_id">Custom</a>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.init">init</span>&nbsp;: <code class="type">('lsolver -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Performs linear solver initalization.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.setup">setup</span>&nbsp;: <code class="type">('lsolver -> 'matrix -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Performs linear solver setup.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.solve">solve</span>&nbsp;: <code class="type">'lsolver -> 'matrix -> 'data -> 'data -> float -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The call <code class="code">solve&nbsp;ls&nbsp;a&nbsp;x&nbsp;b&nbsp;tol</code> should solve the linear system
          $Ax = b$ .</p>

<p>Direct solvers can ignore <code class="code">tol</code>.
          Matrix-free solvers can ignore <code class="code">a</code> (relying instead on the <code class="code">atimes</code>
          function).
          Iterative solvesr should attempt to solve to within the weighted
          2-norm tolerance, <code class="code">tol</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_atimes">set_atimes</span>&nbsp;: <code class="type">('lsolver -> ('data, 'kind) <a href="Sundials_LinearSolver.Custom.html#TYPEatimesfn">atimesfn</a> -> unit)<br>       option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Provides the linear solver with a problem-specific <a href="Sundials_LinearSolver.Custom.html#TYPEatimesfn"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">Custom</span>.atimesfn</code></a>.
          The given function may only be used within <code class="code">init</code>, <code class="code">setup</code>,
          and <code class="code">solve</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_preconditioner">set_preconditioner</span>&nbsp;: <code class="type">('lsolver -><br>        <a href="Sundials_LinearSolver.Custom.html#TYPEpsetupfn">psetupfn</a> option -><br>        ('data, 'kind) <a href="Sundials_LinearSolver.Custom.html#TYPEpsolvefn">psolvefn</a> option -> unit)<br>       option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Provides the linear solver with preconditioner routines.
          The given functions may only be used within <code class="code">init</code>, <code class="code">setup</code>,
          and <code class="code">solve</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_scaling_vectors">set_scaling_vectors</span>&nbsp;: <code class="type">('lsolver -> 'data option -> 'data option -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Passes the left/right scaling vectors for use in <code class="code">solve</code>.
          The call <code class="code">set_scaling_vectors&nbsp;ls&nbsp;s1&nbsp;s2</code> provides diagonal matrices
          of scale factors for solving the system
          $\tilde{A}\tilde{x} = \tilde{b}$ 
          where
          $\tilde{A} = S_1 P_1^{-1} A P_2^{-1} S_2^{-1}$ ,
          $\tilde{b} = S_1 P_1^{-1} b$ , and
          $\tilde{x} = S_2 P_2 x$ .
          A <code class="code"><span class="constructor">None</span></code> argument indicates an identity scaling matrix.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_zero_guess">set_zero_guess</span>&nbsp;: <code class="type">('lsolver -> bool -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Used to indicate whether the next call to the solve function will
          be made with a zero initial guess.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_num_iters">get_num_iters</span>&nbsp;: <code class="type">('lsolver -> int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The number of linear iterations performed in the last <code class="code">solve</code> call.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_res_norm">get_res_norm</span>&nbsp;: <code class="type">('lsolver -> float) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The final residual norm from the last <code class="code">solve</code> call.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_res_id">get_res_id</span>&nbsp;: <code class="type">('lsolver -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a>) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The preconditioned initial residual vector. This vector may be
          requested if the iterative method computes the preconditioned
          initial residual and returns from <code class="code">solve</code> successfully without
          performing any iterations (i.e., either the initial guess or the
          preconditioner is sufficiently accurate).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_last_flag">get_last_flag</span>&nbsp;: <code class="type">('lsolver -> int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Use to indicate the last error encountered by the linear solver.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.get_work_space">get_work_space</span>&nbsp;: <code class="type">('lsolver -> int * int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Return the storage requirements for the linear solver.
          The result <code class="code">(lrw,&nbsp;liw)</code> gives the number of words used for
          storing real values (<code class="code">lrw</code>) and the number of words used
          for storing integer values (<code class="code">liw</code>).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTops.set_prec_type">set_prec_type</span>&nbsp;: <code class="type">('lsolver -> <a href="Sundials_LinearSolver.Iterative.html#TYPEpreconditioning_type">Sundials_LinearSolver.Iterative.preconditioning_type</a> -> unit)<br>       option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Called by Iterative.set_prec_type and when a linear solver is
          associated with an integrator.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>
<code>}</code>

<div class="info ">
<div class="info-desc">
<p>The operations required to implement an iterative linear solver.
      Failure should be indicated by raising an exception (preferably
      one of the exceptions in this package). Raising
      <a href="Sundials.html#EXCEPTIONRecoverableFailure"><code class="code"><span class="constructor">Sundials</span>.<span class="constructor">RecoverableFailure</span></code></a> indicates a generic
      recoverable failure.</p>
</div>
</div>


<pre><span id="VALmake_ops"><span class="keyword">val</span> make_ops</span> : <code class="type">?solver_id:<a href="Sundials_LinearSolver.html#TYPElinear_solver_id">Sundials_LinearSolver.linear_solver_id</a> -><br>       ?init:('lsolver -> unit) -><br>       ?setup:('lsolver -> 'matrix -> unit) -><br>       ?set_atimes:('lsolver -><br>                    ('data, 'kind) <a href="Sundials_LinearSolver.Custom.html#TYPEatimesfn">atimesfn</a> -> unit) -><br>       ?set_preconditioner:('lsolver -><br>                            <a href="Sundials_LinearSolver.Custom.html#TYPEpsetupfn">psetupfn</a> option -><br>                            ('data, 'kind) <a href="Sundials_LinearSolver.Custom.html#TYPEpsolvefn">psolvefn</a><br>                            option -> unit) -><br>       ?set_scaling_vectors:('lsolver -> 'data option -> 'data option -> unit) -><br>       ?set_zero_guess:('lsolver -> bool -> unit) -><br>       ?get_num_iters:('lsolver -> int) -><br>       ?get_res_norm:('lsolver -> float) -><br>       ?get_res_id:('lsolver -> ('data, 'kind) <a href="Nvector.html#TYPEt">Nvector.t</a>) -><br>       ?get_last_flag:('lsolver -> int) -><br>       ?get_work_space:('lsolver -> int * int) -><br>       ?set_prec_type:('lsolver -><br>                       <a href="Sundials_LinearSolver.Iterative.html#TYPEpreconditioning_type">Sundials_LinearSolver.Iterative.preconditioning_type</a> -> unit) -><br>       solver_type:<a href="Sundials_LinearSolver.html#TYPElinear_solver_type">Sundials_LinearSolver.linear_solver_type</a> -><br>       solve:('lsolver -> 'matrix -> 'data -> 'data -> float -> unit) -><br>       unit -> ('matrix, 'data, 'kind, 'lsolver) <a href="Sundials_LinearSolver.Custom.html#TYPEops">ops</a></code></pre><div class="info ">
<div class="info-desc">
<p>Convenience function for constructing a <a href="Sundials_LinearSolver.Custom.html#TYPEops"><code class="code"><span class="constructor">Sundials_LinearSolver</span>.<span class="constructor">Custom</span>.ops</code></a> value.</p>
</div>
</div>

<pre><span id="VALmake_with_matrix"><span class="keyword">val</span> make_with_matrix</span> : <code class="type">('matrix, 'data, 'kind, 'lsolver) <a href="Sundials_LinearSolver.Custom.html#TYPEops">ops</a> -><br>       ?context:<a href="Sundials.Context.html#TYPEt">Sundials.Context.t</a> -><br>       'lsolver -><br>       ('matrixkind, 'matrix, 'data, 'kind) Sundials.Matrix.t -><br>       ('matrix, 'data, 'kind, [ `Custom of 'lsolver | `Dls | `Iter ])<br>       <a href="Sundials_LinearSolver.html#TYPEt">Sundials_LinearSolver.t</a></code></pre><div class="info ">
<div class="info-desc">
<p>Create a linear solver given a set of operations and an internal state.
      The resulting solver is tagged with both <code class="code"><span class="keywordsign">`</span><span class="constructor">Dls</span></code> and <code class="code"><span class="keywordsign">`</span><span class="constructor">Iter</span></code>, although
      its suitability depends on which operations are defined.
      Use a type cast to filter inappropriate tags.</p>

<p>The <code class="code">solver_type</code> may not be <a href="Sundials_LinearSolver.html#TYPElinear_solver_type">MatrixEmbedded</a>.</p>

<p>NB: This feature is only available for
        <a href="Sundials_Config.html#VALsundials_version">Config.sundials_version</a> &gt;= 3.0.0.</p>
</div>
</div>

<pre><span id="VALmake_without_matrix"><span class="keyword">val</span> make_without_matrix</span> : <code class="type">(unit, 'data, 'kind, 'lsolver) <a href="Sundials_LinearSolver.Custom.html#TYPEops">ops</a> -><br>       ?context:<a href="Sundials.Context.html#TYPEt">Sundials.Context.t</a> -><br>       'lsolver -><br>       (unit, 'data, 'kind, [ `Custom of 'lsolver | `Iter | `MatE ])<br>       <a href="Sundials_LinearSolver.html#TYPEt">Sundials_LinearSolver.t</a></code></pre><div class="info ">
<div class="info-desc">
<p>Create a linear solver given a set of operations and an internal state.
      The resulting solver is tagged with both <code class="code"><span class="keywordsign">`</span><span class="constructor">Dls</span></code> and <code class="code"><span class="keywordsign">`</span><span class="constructor">Iter</span></code>, although
      its suitability depends on which operations are defined.
      Use a type cast to filter inappropriate tags.</p>

<p>The <code class="code">solver_type</code> may not be <a href="Sundials_LinearSolver.html#TYPElinear_solver_type">Direct</a>.</p>

<p>This feature is only available for
      <a href="Sundials_Config.html#VALsundials_version">Config.sundials_version</a> &gt;= 3.0.0.</p>

<p>The <a href="Sundials_LinearSolver.html#TYPElinear_solver_type">MatrixEmbedded</a> solver_type is only
      available for
      <a href="Sundials_Config.html#VALsundials_version">Config.sundials_version</a> &gt;= 5.8.0.</p>
</div>
</div>

<pre><span id="VALunwrap"><span class="keyword">val</span> unwrap</span> : <code class="type">('m, 'data, 'kind, [> `Custom of 'lsolver ]) <a href="Sundials_LinearSolver.html#TYPEt">Sundials_LinearSolver.t</a> -><br>       'lsolver</code></pre><div class="info ">
<div class="info-desc">
<p>Return the internal state from an custom iterative linear solver.</p>
</div>
</div>
<h4 id="dlscustom">Wrapper for making custom Direct linear solvers.</h4>
<pre><code><span id="TYPEdls_ops"><span class="keyword">type</span> <code class="type">('matrix, 'data, 'kind, 'lsolver)</code> dls_ops</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdls_ops.init">init</span>&nbsp;: <code class="type">('lsolver -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Performs linear solver initalization.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdls_ops.setup">setup</span>&nbsp;: <code class="type">('lsolver -> 'matrix -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Performs linear solver setup based on an updated matrix.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdls_ops.solve">solve</span>&nbsp;: <code class="type">'lsolver -> 'matrix -> 'data -> 'data -> float -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>The call <code class="code">solve&nbsp;ls&nbsp;<span class="constructor">A</span>&nbsp;x&nbsp;b&nbsp;tols</code> should solve the linear system
      $Ax = b$  to the requested tolerance.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdls_ops.space">space</span>&nbsp;: <code class="type">('lsolver -> int * int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Return the storage requirements for the linear solver.
      The result <code class="code">(lrw,&nbsp;liw)</code> gives the number of words used for
      storing real values (<code class="code">lrw</code>) and the number of words used
      for storing integer values (<code class="code">liw</code>).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>
<code>}</code>

<div class="info ">
<div class="info-desc">
<p>The operations required to implement a direct linear solver.
      Failure should be indicated by raising an exception (preferably
      one of the exceptions in this package). Raising
      <a href="Sundials.html#EXCEPTIONRecoverableFailure"><code class="code"><span class="constructor">Sundials</span>.<span class="constructor">RecoverableFailure</span></code></a> indicates a generic
      recoverable failure.</p>
</div>
</div>


<pre><span id="VALmake_dls"><span class="keyword">val</span> make_dls</span> : <code class="type">('matrix, 'data, 'kind, 'lsolver) <a href="Sundials_LinearSolver.Custom.html#TYPEdls_ops">dls_ops</a> -><br>       ?context:<a href="Sundials.Context.html#TYPEt">Sundials.Context.t</a> -><br>       'lsolver -><br>       ('matrixkind, 'matrix, 'data, 'kind) Sundials.Matrix.t -><br>       ('matrix, 'data, 'kind, [ `Custom of 'lsolver | `Dls ])<br>       <a href="Sundials_LinearSolver.html#TYPEt">Sundials_LinearSolver.t</a></code></pre><div class="info ">
<div class="info-desc">
<p>Create a direct linear solver given a set of operations and an
      internal state.</p>

<p>NB: This feature is only available for
          <a href="Sundials_Config.html#VALsundials_version">Config.sundials_version</a> &gt;= 3.0.0.</p>
</div>
</div>
</body></html>
